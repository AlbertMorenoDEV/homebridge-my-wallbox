{
	"pluginAlias": "wallbox",
	"headerDisplay": "Homebridge plugin for WallBox Pulsar Charger",
	"pluginType": "platform",
	"singular": true,
	"schema": {
		"type": "object",
		"properties": {
			"name": {
				"title": "Accessory Name",
				"description": "Name for this accessory",
				"type": "string",
				"required": true,
				"placeholder": "Wallbox",
				"default": "Wallbox"
			},
			"email": {
				"title": "Email",
				"type": "string",
				"placeholder": "username@gmail.com",
				"required": true
			},
			"password": {
				"title": "Password",
				"type": "string",
				"placeholder": "password",
				"required": true
			},
			"refreshRate": {
				"title": "Refresh Rate Minutes",
				"description": "Polling time in minutes.",
				"type": "integer",
				"minimum": 5,
				"maximum": 1440,
				"required": true,
				"default": 60
			},
			"cars": {
        "title": "Cars",
        "type": "array",
        "required": true,
        "items": {
          "title": "Car Info",
          "type": "object",
          "properties": {
						"carName": {
              "title": "Name of your Car",
              "type": "string",
              "minLength": 3,
              "required": false,
							"placeholder": "My EV"
            },
            "chargerName": {
              "title": "Name of your Charger used for this car, reference the logging for exact names",
              "type": "string",
              "minLength": 3,
              "required": false,
							"placeholder": "Wallbox"
            },
            "kwH": {
              "title": "Battery Size in kwH for this car",
              "type": "integer",
							"required": false,
							"placeholder": 78
						}
					}
				}
			},
			"locationAddress": {
        "title": "Street Address",
        "type": "string",
        "required": false,
        "placeholder": "Leave blank for all locations"
      },
			"showControls": {
				"title": "Expose Controls for Amps and Start/Stop Charging",
				"type": "boolean",
				"required": true,
				"default": false
			}
		}
	},
	"layout": [
		{
			"type": "help",
			"helpvalue": "<h4><b>Required settings<b/></h4>"
		},
		{
			"type": "flex",
			"flex-flow": "row wrap",
			"items": [
				"name"
			]
		},
		{
			"type": "help",
			"helpvalue": "<p class='help-block'> <h6><b>My.Wallbox account info for email login<b></h6></p>"
		},
		{
			"type": "flex",
			"flex-flow": "row wrap",
			"items": [
				"email",
				"password"
			]
		},
		{
			"type": "flex",
			"flex-flow": "row wrap",
			"items": [
				"refreshRate"
			]
		},
		{
      "type": "help",
      "helpvalue": "<h6><b>Charging Estimate</b></h6><p class='help-block'> The plugin will attempt to calulate in real time the percent charge added based on these values for each car.<br/></p>"
    },
		{
			"key": "cars",
			"type": "tabarray",
			"title": "{{ value.carName || 'new Car' }}",
			"items": [
				"cars[].carName",
				"cars[].chargerName",
				"cars[].kwH"
					]			
		},
		{
			"type": "flex",
			"flex-flow": "row wrap",
			"items": [
				"showControls"
			]
		}
	]
}